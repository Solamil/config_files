#!/bin/bash


#
# BEGIN platform definable
#
rsync_media(){
	src=$1; dst=$2
	rsync \
	-rtvup --ignore-existing -e ssh \
	$src $dst
}

sync_remote(){

	rsync \
	-rtvucpRE --zc=zstd --zl=22 -e ssh \
	$HOME/./{bin/,dl/,docs/,scripts/,pics/,devel/c_school/,devel/VirtualBox\ VMs/} \
	$HOME/./.config/BraveSoftware/Brave-Browser/Default/Bookmarks \
	$HOME/./.config/qutebrowser/{bookmarks,config.py,quickmarks} \
	$HOME/./.config/systemd/user/{*.service,*.timer} \
	$HOME/./.config/git/ \
	$HOME/./.config/nvim/init.vim \
	$HOME/./.config/newsboat/{config,urls} \
	$HOME/./.config/zsh/{.zprofile,.zshrc} \
	$remote_dest:~/
#	$HOME/./dl/ \
#	$HOME/./docs/ \
#	$HOME/./devel/c_school/ \
#	$HOME/./devel/VirtualBox\ VMs/ \
#	$HOME/./.config/BraveSoftware/Brave-Browser/Default/Bookmarks \
#	$HOME/./.config/systemd/user/{*.service,*.timer} \
#	$HOME/./.config/{inputrc,Xmodmap,xprofile,aliasrc,mailcap} \
#	$HOME/./.config/qutebrowser/{bookmarks,config.py,quickmarks} \
#	$HOME/./.config/msmtp/config \
#	$HOME/./.config/git/ \
#	$HOME/./.config/mpv/ \
#	$HOME/./.config/newsboat/{config,urls} \
#	$HOME/./.config/mbsync/config \
#	$HOME/./.config/nvim/init.vim \
#	$HOME/./.config/neomutt/ \
#	$HOME/./.config/bash/ \
#	$HOME/./.config/zsh/ \
#	$HOME/./devel/c_school/ \
}
sync_media(){
	src=$1; dst=$2	
	rsync_media $src $dst
	rsync_media $dst $src # Syncing it back
}
sync_media_remote(){
	sync_media_files "/media/michael/HardDrive/Movies/" \
		"$remote_dest:/media/michael/HardDrive/Movies/"

	sync_media_files "/media/michael/HardDrive/Music/" \
		"$remote_dest:/media/michael/HardDrive/Music/"
}
# rsync -rtvucp --zc=zstd --zl=22 $HOME/./{dl/,docs/,scripts/,devel/c_school/,devel/VirtualBox\ VMs/} michael@10.120.29.73:$HOME/
# rsync -rtvup --ignore-existing /media/michael/HardDrive/Movies/ michael@10.120.29.73:/media/michael/HardDrive/Movies/

# rsync -rtvup --ignore-existing /media/michael/HardDrive/Movies/ michael@10.120.29.73:/media/michael/HardDrive/Movies/

#
# END platform definable
#

#
# BEGIN subcommand function
#
cmd_remote(){
	user=$(whoami)
	[[ $(hostname) == "lenovo" ]] && remote_host="desktop" || remote_host="lenovo"
	remote_dest=$user"@"$remote_host
	case "$1" in
		media) shift; sync_media_remote;;
		files) shift; sync_remote ;;
	esac
}
cmd_wd(){
	sync_media "/media/michael/HardDrive/Movies/" \
		   "/media/michael/ExtDrive/Filmy/"

	sync_media "/media/michael/HardDrive/Music/" \
		   "/media/michael/ExtDrive/Music/"
}
cmd_test(){
	src="/home/michael/"
	dst=$src"data/test-dir/"
	rsync \
	--perms --recursive --times --relative \
	$src./.config/systemd/user/*.service \
	$src./scripts/ \
	$src./.config/{inputrc,Xmodmap,xprofile,aliasrc,mailcap} \
	$src./.config/qutebrowser/{bookmarks,config.py,quickmarks} \
	$src./.config/msmtp/config \
	$src./.config/git/ \
	$src./.config/mpv/ \
	$src./.config/newsboat/{config,urls} \
	$src./.config/mbsync/config \
	$src./.config/nvim/init.vim \
	$src./.config/neomutt/ \
	$src./.config/bash/ \
	$src./.config/zsh/ \
	$src./devel/c_school/ \
	$dst
}
#
# END subcommand functions 
#
case "$1" in
	remote) shift; cmd_remote "$@" ;;
	wd) shift; cmd_wd "$@" ;;
	test) shift; cmd_test "$@" ;;
#	*)   cp_dot "$@" ;;


esac
exit 0
